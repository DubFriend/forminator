<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Forminator Bootstrap</title>

    <link href="bootstrap-3.1.1-dist/css/bootstrap.min.css" rel="stylesheet">

    <style type="text/css">
      /*bootstrap modal triggers a vertical scrollbar*/
      html {
             overflow-y: scroll;
      }

      .error .help-block,
      .form-group.error .control-label,
      .error .radio,
      .error .checkbox,
      .error .radio-inline,
      .error .checkbox-inline {
        color: #a94442;
      }
      .form-group.error .form-control {
        border-color: #a94442;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
      }
      .form-group.error .form-control:focus {
        border-color: #843534;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px #ce8483;
                box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px #ce8483;
      }
      .error .input-group-addon {
        color: #a94442;
        background-color: #f2dede;
        border-color: #a94442;
      }
      .error .form-control-feedback {
        color: #a94442;
      }

      .success .help-block,
      .form-group.success .control-label,
      .success .radio,
      .success .checkbox,
      .success .radio-inline,
      .success .checkbox-inline {
        color: #3c763d;
      }
      .form-group.success .form-control {
        border-color: #3c763d;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
      }
      .form-group.success .form-control:focus {
        border-color: #2b542c;
        -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px #67b168;
                box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px #67b168;
      }
      .success .input-group-addon {
        color: #3c763d;
        background-color: #dff0d8;
        border-color: #3c763d;
      }
      .success .form-control-feedback {
        color: #3c763d;
      }



      .pagination > .selected > a,
      .pagination > .selected > span,
      .pagination > .selected > a:hover,
      .pagination > .selected > span:hover,
      .pagination > .selected > a:focus,
      .pagination > .selected > span:focus {
        z-index: 2;
        color: #fff;
        cursor: default;
        background-color: #428bca;
        border-color: #428bca;
      }

      .frm-list-name tr.frm-list-item.selected td {
        background: rgb(216, 247, 211);
      }

      .frm-goto-page-name {
        position: relative;
        top: 20px;
      }

      .frm-goto-page-name input[name="page"] {
        width: 60px;
      }

      .frm-new-name {
        position: relative;
        top: 14px;
      }

      .pages-data {
        position: relative;
        top: 11px;
      }

    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <!-- Form -->
    <div class="modal fade js-form-modal">
      <form class="modal-dialog frm-name form-horizontal" method="POST" enctype="multipart/form-data" action="respond.php" role="form">
        <div class="modal-content">

          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Forminator</h4>
          </div>

          <div class="modal-body">

            <input type="hidden" name="id"/>

            <div class="frm-group form-group">
              <label class="col-sm-3 control-label">Text</label>
              <div class="col-sm-7">
                <input class="form-control" type="text" name="text"/>
                <div class="frm-feedback form-control-feedback"></div>
              </div>
            </div>

            <div class="frm-group form-group">
              <label class="col-sm-3 control-label">Textarea</label>
              <div class="col-sm-7">
                <textarea class="form-control" name="textarea"></textarea>
                <div class="frm-feedback form-control-feedback"></div>
              </div>
            </div>

            <div class="frm-group form-group">
              <label class="col-sm-3 control-label">Select</label>
              <div class="col-sm-7">
                <select class="form-control" name="select">
                  <option value="a">A</option>
                  <option value="b">B</option>
                </select>
                <div class="frm-feedback form-control-feedback"></div>
              </div>
            </div>

            <div class="frm-group form-group">
              <label class="col-sm-3 control-label">Radio</label>
              <div class="col-sm-7">
                <label class="radio-inline">
                  <input type="radio" name="radio" value="a"/> A
                </label>
                <label class="radio-inline">
                  <input type="radio" name="radio" value="b"/> B
                </label>
                <div class="frm-feedback form-control-feedback"></div>
              </div>
            </div>

            <div class="frm-group form-group">
              <label class="col-sm-3 control-label">Checkbox</label>
              <div class="col-sm-7">
                <label class="checkbox-inline">
                  <input type="checkbox" name="checkbox[]" value="a"/> A
                </label>
                <label class="checkbox-inline">
                  <input type="checkbox" name="checkbox[]" value="b"/> B
                </label>
                <div class="frm-feedback form-control-feedback"></div>
              </div>
            </div>

          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-default js-close-form-modal" data-dismiss="modal">Close</button>
            <input class="btn btn-primary" type="submit" name="submit" value="Save"/>
            <div class="frm-global-feedback form-control-feedback"></div>
          </div>

        </div>
      </form>
    </div>


    <!-- Confirm Delete -->
    <div class="modal fade js-confirm-delete-modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Delete Item</h4>
          </div>
          <div class="modal-body">
            <p>Are you sure you want to delete this item?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>


            <button type="button" class="btn btn-danger js-delete">Delete</button>
          </div>
        </div>
      </div>
    </div>


    <div class="container-fluid">

      <h1>Forminator</h1>

      <div class="row">
        <div class="col-sm-12">

          <!-- Search -->
          <form class="frm-search-name form-horizontal well" method="POST" action="respond.php" role="form">
            <legend>Search</legend>
            <div class="frm-group form-group">
                <label class="col-sm-3 control-label">Search Text</label>
                <div class="col-sm-5">
                  <input type="text" name="text" class="form-control"/>
                  <div class="frm-feedback form-control-feedback"></div>
                </div>
            </div>

            <div class="frm-group form-group">
                <label class="col-sm-3 control-label">Select</label>
                <div class="col-sm-5">
                  <select name="select" class="form-control">
                      <option value="" selected></option>
                      <option value="a">A</option>
                      <option value="b">B</option>
                  </select>
                  <div class="frm-feedback form-control-feedback"></div>
                </div>
            </div>

            <div class="frm-group form-group">
                <label class="col-sm-3 control-label">Radio</label>
                <div class="col-sm-5">
                  <label class="radio-inline">
                    <input type="radio" name="radio" value="a"/> A
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="radio" value="b"/> B
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="radio" value="" checked/> None
                  </label>
                  <div class="frm-feedback form-control-feedback"></div>
                </div>
            </div>

            <div class="frm-group form-group">
                <label class="col-sm-3 control-label">Checkbox</label>
                <div class="col-sm-5">
                  <label class="checkbox-inline">
                    <input type="checkbox" name="checkbox[]" value="a"/> A
                  </label>
                  <label class="checkbox-inline">
                    <input type="checkbox" name="checkbox[]" value="b"/> B
                  </label>
                  <div class="frm-feedback form-control-feedback"></div>
                </div>
            </div>

            <div class="frm-group form-group">
              <div class="col-sm-offset-3 col-sm-9">
                <input class="btn btn-default" type="submit" name="submit" value="Search"/>
                <div class="frm-global-feedback form-control-feedback"></div>
              </div>
            </div>
          </form>


        </div>
      </div>


      <div class="row">

        <div class="col-sm-2">
          <!-- New Item -->
          <button class="frm-new-name btn btn-lg btn-primary">
            New <span class="glyphicon glyphicon-plus-sign"></span>
          </button>

        </div>

        <div class="col-sm-2 pages-data">
          <!-- Pagination Data -->
          <p><b>Pages</b> <span class="frm-number-of-pages-name badge pull-right">5</span></p>
          <p><b>Results</b> <span class="frm-number-of-results-name badge pull-right">42</span></p>
        </div>

        <!-- Pagination Numbers -->
        <div class="col-sm-6">
          <ul class="pagination frm-page-numbers-name">
            <li class="frm-previous-name"><a href="#">&laquo;</a></li>
            <li class="frm-number-container"><a href="#" data-number="1">1</a></li>
            <li class="frm-number-container"><a href="#" data-number="2">2</a></li>
            <li class="frm-number-container"><a href="#" data-number="3">3</a></li>
            <li class="frm-number-container"><a href="#" data-number="4">4</a></li>
            <li class="frm-number-container"><a href="#" data-number="5">5</a></li>
            <li class="frm-next-name"><a href="#">&raquo;</a></li>
          </ul>
        </div>


        <div class="col-sm-2">
          <!-- Pagination Goto Page -->
          <form class="frm-goto-page-name form-inline pull-right" method="GET" action="respond.php" role="form">
              <div class="frm-group form-group">
                  <input class="form-control" type="text" name="page" placeholder="Page"/>
                  <div class="frm-feedback form-control-feedback"></div>
              </div>
              <div class="frm-group form-group">
                  <input class="btn btn-default" type="submit" name="submit" value="Go"/>
                  <div class="frm-global-feedback form-control-feedback"></div>
              </div>
          </form>
        </div>

      </div>

      <div class="table-responsive">
        <table class="table table-hover">

          <!-- Ordinator -->
          <thead class="frm-ordinator-name">
            <th></th>
            <th><a href="#" data-field="text">Text <span data-order="neutral"><span class="glyphicon glyphicon-resize-vertical"></span></span></a></th>
            <th><a href="#" data-field="textarea">Textarea <span data-order="neutral"><span class="glyphicon glyphicon-resize-vertical"></span></span></th>
            <th><a href="#" data-field="select">Select <span data-order="neutral"><span class="glyphicon glyphicon-resize-vertical"></span></span></th>
            <th>Radio</th>
            <th>Checkbox</th>
          </thead>

          <!-- List -->
          <tbody class="frm-list-name">
            <tr class="frm-list-item">
              <td>
                <button class="frm-edit-item btn btn-sm btn-default">
                  <span class="glyphicon glyphicon-edit"></span>
                </button>
                <button class="frm-delete-item btn btn-sm btn-danger">
                  <span class="glyphicon glyphicon-remove"></span>
                </button>
                <span data-field="id" style="display:none;"></span>
              </td>
              <td data-field="text"></td>
              <td data-field="textarea"></td>
              <td data-field="select"></td>
              <td data-field="radio"></td>
              <td data-field="checkbox[]"></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="frm-no-results-name" style="display:none;">
        No matches found.
      </div>

    </div>


    <script src="lib/jquery-1.11.0.js"></script>
    <script src="bootstrap-3.1.1-dist/js/bootstrap.min.js"></script>
    <script src="forminator.js"></script>
    <script>
    $(document).ready(function () {
        'use strict';

        var nameForminator = forminator.init({
            name: 'name',
            url: 'crud.php',

            // isHardREST: true,

            // mapOutputData: function (data) {
            //   console.log('output data', data);
            //   return 'mapped';
            // },

            // delete functionality needs to know which field(s) to use to
            // uniquely identify an item.
            uniquelyIdentifyingFields: ['id'],
            validate: function (data) {
                var errors = {};

                if(data.text.length > 3) {
                    errors.text = '3 character maximum';
                }
                else if(data.text === 'foo') {
                    errors.text = 'cannot be "foo"';
                }

                if(errors.text) {
                    errors.GLOBAL = 'An error occured.';
                }

                return errors;
            },
            fieldValidators: {
                text: function (value) {
                    if(!value) {
                        return {
                            isSuccess: false,
                            message: 'Required'
                        }
                    }
                    else {
                        return {
                            isSuccess: true,
                            message: 'OK'
                        };
                    }
                },
                select: function (value) {
                    if(value === 'b') {
                        return {
                            isSuccess: true
                        }
                    }
                }
            },
            success: function (action, response) {
                console.log('success', action, response, this);
                $('.js-form-modal').modal('hide');
                setTimeout(this.clearFormFeedback, 2000);
            },
            error: function (action, response) {
                console.log('error', arguments, this);
            },
            complete: function (action, response) {
                console.log('complete', arguments, this);
            },
            selected: function ($item) {
                $('.js-form-modal').modal('show');
            },
            deleteConfirmation: function (deleteItem) {
                var $deleteButton = $('.js-delete');
                var $modal = $('.js-confirm-delete-modal');
                $modal.modal('show');
                $deleteButton.click(function () {
                    $modal.modal('hide');
                    deleteItem();
                    $deleteButton.unbind();
                });
            },
            fieldMap: {
                text: function (value, allValues) {
                    return value.toUpperCase();
                }
            },
            orderIcons: {
                ascending: '<span class="glyphicon glyphicon-circle-arrow-up"></span>',
                descending: '<span class="glyphicon glyphicon-circle-arrow-down"></span>',
                neutral: '<span class="glyphicon glyphicon-resize-vertical"></span>'
            }
        });

        $('.frm-new-name').click(function () {
            $('.js-form-modal').modal('show');
        });

        // http://stackoverflow.com/questions/8363802/bind-a-function-to-twitter-bootstrap-modal-close
        // $('.js-form-modal').on('hidden.bs.modal', function () {
        //     nameForminator.clearFormFeedback();
        // });

    });
    </script>
  </body>
</html>
