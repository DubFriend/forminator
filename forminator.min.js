// forminator version 0.0.0
// https://github.com/DubFriend/forminator
// (MIT) 09-02-2014
// Brian Detering <BDeterin@gmail.com> (http://www.briandetering.net/)
!function(){"use strict";{var a=function(a,b){return $.inArray(b,a)},b=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c,a)},c=function(a,c){var d=[];return b(a,function(a,b,e){d.push(c(a,b,e))}),d},d=function(){var a,c={};for(a=0;a<arguments.length;a+=1)b(arguments[a],function(a,b){c[b]=a});return c},e=(function(){var a=0;return function(){return a+=1}}(),function(c){c=c||{};var d={};return c.publish=function(a,c){b(d[a],function(a){a(c)})},c.subscribe=function(a,b){d[a]=d[a]||[],d[a].push(b)},c.unsubscribe=function(c){b(d,function(b){var d=a(b,c);-1!==d&&b.splice(d,1)})},c});!function(){var c={},e=function(b){var c,d,e,f="",g="",h=function(){var c=-1!==a(b,"#"),d=-1!==a(b,"?"),e="";return d&&(e=b.split("?")[1]||"",c&&(e=e.split("#")[0]||"")),f=d?b.split("?")[0]||"":c?b.split("#")[0]||"":b,c&&(g=b.split("#")[1]||""),e?e.split("&"):[]},i=h(b),j={};for(e=0;e<i.length;e+=1)c=i[e].split("=")[0],d=i[e].split("=")[1],j[c]=d;return{url:f||"",hash:g||"",parameters:j}},f=function(a){var c=[];return b(a.parameters,function(b,d){c.push(d+"="+a.parameters[d])}),a.url+(c.length>0?"?"+c.join("&"):"")+(a.hash?"#"+a.hash:"")};return c.get=function(a){return e(a).parameters},c.set=function(a,b){var c=e(a);return c.parameters=d(c.parameters,b),f(c)},c}()}"undefined"==typeof console&&(console={},console.warn=function(){});var f=function(a){var b={},c=a.url,d=a.$;return b.input={text:l,textarea:m,select:k,radio:j,checkbox:h,file:i},b.buildFormInputs=function(){return n({$:d,factory:b})},b.form=function(){return o({$:d,url:c,inputs:b.buildFormInputs()})},b},g=function(a,b){var c=e(),d=a.$;return c.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},c.$=function(a){return a?d.find(a):d},c.get=function(){return c.$().val()},c.set=function(a){var b=c.get();b!==a&&(c.$().val(a),c.publish("change",a))},b.buildSetter=function(a){return function(b){var d=c.get();d!==b&&(a.call(c,b),c.publish("change",b))}},c},h=function(c){var d={},e=g(c,d);return e.getType=function(){return"checkbox"},e.get=function(){var a=[];return e.$().filter(":checked").each(function(){$(this).is(":checked")&&a.push($(this).val())}),a},e.set=function(c){c=c||[];var d=e.get(),f=!1;d.length===c.length?b(d,function(b){-1===a(c,b)&&(f=!0)}):f=!0,f&&(e.$().each(function(){$(this).prop("checked",!1)}),b(c,function(a){e.$().filter('[value="'+a+'"]').prop("checked",!0)}),e.publish("change",c))},e.$().click(function(){e.publish("change",e.get())}),e},i=function(){var a={};return a.getType=function(){return"file"},a},j=function(a){var b={},c=g(a,b);return c.getType=function(){return"radio"},c.get=function(){return c.$().filter(":checked").val()},c.set=b.buildSetter(function(a){c.$().filter('[value="'+a+'"]').prop("checked",!0)}),c.$().change(function(){c.publish("change",c.get())}),c},k=function(a){var b={},c=g(a,b);return c.getType=function(){return"select"},c.$().change(function(){c.publish("change",c.get())}),c},l=function(a){var b={},c=g(a,b);return c.getType=function(){return"text"},c.$().keyup(function(){c.publish("change",c.get())}),c},m=function(a){var b={},c=g(a,b);return c.getType=function(){return"textarea"},c.get=function(){return c.$().html()},c.set=b.buildSetter(function(a){this.$().html(a)}),c.$().keyup(function(){c.publish("change",c.get())}),c},n=function(c){var d=c.$,e=c.factory,f={},g={},h=function(a,b,c){c=c||f,d.find(b).each(function(){c[$(this).attr("name")]=e.input[a]({$:$(this)})})};h("text",'input[type="text"]'),h("textarea","textarea"),h("select","select"),h("file",'input[type="file"]',g);var i=function(c,g){var h=[];d.find(g).each(function(){-1===a(h,$(this).attr("name"))&&h.push($(this).attr("name"))}),b(h,function(a){f[a]=e.input[c]({$:d.find('input[name="'+a+'"]')})})};return i("radio",'input[type="radio"]'),i("checkbox",'input[type="checkbox"]'),{inputs:f,files:g}},o=function(a){{var b={},c=a.$,d=a.url;a.inputs}return c.submit(function(a){a.preventDefault(),$.ajax({url:d,method:"POST",data:{foo:"bar"},dataType:"json",beforeSend:function(){console.log("beforeSend")},success:function(a){console.log("success",a)},error:function(){console.log("error")},complete:function(){console.log("complete")}}),console.log("submit")}),b},p={};p.init=function(a){{var b=a.$,c=a.url,d=f({$:b,url:c});d.form()}},window.forminator=p}();